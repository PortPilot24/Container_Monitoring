# 📦 개인화 컨테이너 모니터링 및 혼잡도 예측 시스템 (작성중)

## 📝 서비스 설명
광양항 서부 컨테이너터미널 홈페이지에서 공개중인 컨테이너 반출입데이터 중 2025년 1월 1일 ~ 2025년 7월 29일까지의 데이터를 학습하고 최근 데이터를 통해
현재 장치장에 거치되어있는 컨테이너중 사용자의 회사 소유 컨테이너를 조회하는 기능과 장치장 상황을 공지하고 이후 상황을 예측하려는 시스템
--

## 🚀 실행 방법

1. **API Key 설정**
- .env파일 생성
- OPENAI_API_KEY='자신의 api key 입력'
- .gitignore 파일에 .env 삽입

2. **필요 라이브러리 설치**
- pandas
- fastapi
- pydantic
- tensorflow
- numpy
- typing

3. **FastAPI 실행**
- uvicorn app:app --reload

## 데이터 전처리
사용한 컬럼명 : 선사, 컨테이너번호, 상태, 운송유형(반입/반출), 터미널 반입/반출일시, 장치장위치
- 광양항 서부 컨테이너터미널 홈페이지 E-service 에서 공개하고 있는 터미널 반출입 목록을 엑셀형태로 2025년 1월 1일~ 2025년 7월 29일까지의 데이터를 약 2주간격으로
다운받은 후 csv파일로 다시 저장하여 pandas를 이용해 데이터프레임으로 로드
- df.columns = df.columns.str.strip() 실행을 통해 컬럼 명에 있는 공백을 모두 제거
- 데이터프레임 merge 후 컨테이너번호와 터미널 반입일시가 같은 데이터를 중복데이터로 간주하고 제거 (총 데이터 610,631건)
-> 이렇게 하는 이유는 데이터를 일정간격으로 여러번 다운로드 받으면서 컨테이너의 반입일시와 반출일시 사이의 간격이 긴 경우 중복되는 데이터가 있었기 때문
- 터미널 반입일시로부터 반출일시까지를 계산하고 해당 데이터가 어떤 장치장에 거치되어있었는지를 시계열 데이터로 전환
- 기준시간 30분 간격으로 전체 장치장에 얼마나 컨테이너가 있었는지를 학습

## 사용한 모델
- LSTM

## 📊 모델 성능 요약

| 모델 구성                             | MAE  | R2 SCORE |
| ------------------------------------ | -----|---- |
| LSTM                       | 0.016    | -21.1183 |
| CNN + LSTM   | 0.0142    | -6.1511   |
| CNN + LSTM_2 | 0.0003 | 0.9991  |



- **최종 선택한 모델**은 CNN + LSTM_2
- `Optuna`만을 적용했을 때는 MAPE가 **35.32%** 로 다소 아쉬웠지만,
**Feature 및 이상치 제거, 가중치 튜닝을 추가로 수행한 결과 MAPE 24.56%로 약 10%의 성능 향상**을 이루었습니다.

- 특히, **이상치 제거**가 성능 개선에 가장 크게 기여한 것으로 분석되었습니다.

## ⚠️ 진행 과정 및 한계

### ** **



### **🔸**


### **🔸**



### **🔸 최적화 기법 도입으로 성능 향상**



---

## ✅ 결론

- 
---

## 📉 파생 변수 기반 실험 (참고용)


**사용된 주요 파생 변수:**


⚠️ 그러나 해당 변수들을 생성하기 위한 과거 시계열 데이터 확보가 어려워 실제 모델에는 적용하지 못했습니다.
📈 추후 관련 데이터를 제공하는 API가 확보될 경우, 위 파생 변수를 활용한 고성능 모델 적용이 가능할 것으로 기대됩니다.

---

## 📮 향후 개선 방향

- 물류 및 항만 운영 관련 외부 API 연동 검토

- 실시간 예측 결과를 활용한 **자동 물류 계획 추천 기능** 추가

- **서버리스 환경 배포(AWS Lambda 등)** 및 모바일 클라이언트 연계
